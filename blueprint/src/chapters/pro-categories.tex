\chapter{Pro-categories}

Let $\mathcal{C}$ be a category. The category $\pro{\mathcal{C}}$ is the full subcategory of
$\mathrm{Fun}(\mathcal{C}, \mathrm{Set})^{\mathrm{op}}$ on the functors that are cofiltered limits
of representable functors. This category satisfies the following universal property:

\begin{proposition}[Universal property of $\pro{\mathcal{C}}$]
    Let $\mathcal{D}$ be a category with cofiltered limits. The restriction functor
    \[
        \mathrm{Fun}(\pro{\mathcal{C}}, \mathcal{D}) \to \mathrm{Fun}(\mathcal{C}, \mathcal{D})
    ,\] admits a left-adjoint that induces an equivalence
    on the full subcategory of $\mathrm{Fun}(\pro{\mathcal{C}}, \mathcal{D})$ on functors preserving
    cofiltered limits.
    \label{prop:pro-univ-prop}
\end{proposition}

\begin{proof}
    The left-adjoint is the left Kan extension along the inclusion $\mathcal{C} \to \pro{\mathcal{C}}$.
\end{proof}

\url{https://ncatlab.org/nlab/show/pro-object#PropositionCategoriesEquivalentToProC}

\begin{proposition}
    Let $\mathcal{A}$ be a category with cofiltered limits and suppose there exists
    a fully faithful functor $i\colon \mathcal{C} \to \mathcal{A}$ such that
    $i(X)$ is cocompact for all $X \in \mathcal{C}$. Then
    \[
        \lim_{\mathcal{A}} \circ \; \pro{i}\colon \pro{\mathcal{C}} \to \mathcal{A}
    \] is fully faithful.
    \label{prop:pro-equiv-pro}
\end{proposition}

\begin{corollary}
    Let $P$ be a property of objects on a category $\mathcal{A}$ that implies finitely presented.
    Denote by $\mathcal{A}_P$ (resp. $\mathcal{A}_{\pro{P}}$) the full subcategory defined by $P$
    (resp. $\pro{P}$). Suppose $\mathcal{A}$ has cofiltered limits, then $\lim_{\mathcal{A}}$
    induces an equivalence
    \[
        \pro{\mathcal{C}_{P}} \cong \mathcal{C}_{\pro{P}}
    .\]
    \label{cor:pro-object-prop}
\end{corollary}

\begin{proof}
    \uses{prop:pro-equiv-pro}
    Follows from \ref{prop:pro-equiv-pro}, because by definition $\mathcal{C}_{\pro{P}}$ is
    the essential image of $\lim_{\mathcal{A}}(\pro{\mathcal{C}_{P}})$.
\end{proof}

Note that \ref{cor:pro-object-prop} does not apply to $\mathcal{A} = \mathrm{Scheme} / X$
and $P = \mathrm{étale}$, because $\mathrm{Scheme} / X$ does not have all cofiltered limits. It
does apply in the case of $\mathcal{A} = \mathrm{AffScheme} / X$ though or in the case
$\mathrm{CRing}^{\mathrm{op}} / R$.

Recall the following definition:

\begin{definition}
    A category $\mathcal{C}$ is \emph{precoherent} if given a finite effective epimorphism family
    $f\colon \colon X_i \to X$ and a morphism $p\colon Y \to X$, there exists a finite effective epimorphism family
    $g\colon Y_j \to Y$ that factors through $f$.
\end{definition}

\begin{lemma}
    A morphism $f\colon X \to Y$ in $\et{S}$ is an effective epimorphism if and only if
    it is surjective.
    \label{lemma:et-effective-epi}
    \lean{AlgebraicGeometry.Scheme.Etale.effectiveEpi_of_surjective, AlgebraicGeometry.Scheme.Etale.surjective_of_epi}
    \leanok
\end{lemma}

\begin{proof}
    \leanok
    \lean{AlgebraicGeometry.subcanonical_fpqcTopology}
    \uses{thm:fpqc-subcanonical}
    One direction follows from the fact that the fpqc topology is subcanonical. The converse
    holds, because étale morphisms are open: If $f\colon X \to Y$ is an étale morphism
    we may glue two copies of $Y$ along the inclusion of the image of $f$. If $f$ is not surjective,
    the two inclusions of $Y$ into the amalgamated sum are different, but by construction
    they agree on the image of $f$. Hence $f$ is not an epimorphism.
\end{proof}

\begin{lemma}
    The category of schemes is finitary extensive.
    \lean{AlgebraicGeometry.Scheme.finitaryExtensive}
    \leanok
    \label{lemma:scheme-finitaryextensive}
\end{lemma}

\begin{proof}
    \leanok
    Since the Zariski topology is subcanonical, the category of schemes embeds
    into the big Zariski topos, which is finitary extensive. Since
    the Yoneda embedding preserves finite coproducts, the claim follows.
\end{proof}

\begin{lemma}
    The category $\et{X}$ is precoherent.
    \label{lemma:et-precoherent}
    \lean{AlgebraicGeometry.Scheme.Etale.precoherent}
    \leanok
\end{lemma}

\begin{proof}
    \leanok
    \uses{lemma:et-effective-epi, lemma:scheme-finitaryextensive}
    The category of schemes is finitary extensive, so the same holds
    for $\et{X}$. By \ref{lemma:et-effective-epi} the effective epimorphisms
    in $\et{X}$ are the surjective morphisms, hence being an effective epimorphism
    is stable under base change. Thus $\et{X}$ is preregular and therefore precoherent.
\end{proof}

\begin{proposition}
    If $\mathcal{C}$ is precoherent, also $\pro{\mathcal{C}}$ is precoherent.
    \label{prop:pro-precoherent}
\end{proposition}

\section{Coherent topology}

Any precoherent category can be equipped with the coherent coverage, where covering families are given by
finite effective epimorphic families. The coherent topology is the topology generated by the coherent coverage.

\begin{remark}
    One would hope that the topology on \et{X} given by jointly surjective families is the precoherent topology.
    Since effective epimorphisms are simply surjective maps in \et{X}, this would mean that
    every cover in \et{X} can be refined by a finite cover. This is not true though, because
    \et{X} also contains non-quasi-compact schemes.

    The situation is slightly better if we instead consider the affine étale site $\affet{X}$ of $X$, the
    category of affine schemes étale over $X$. Unfortunately, it is not clear to the authors if
    effective epimorphisms in $\affet{X}$ are still surjective.
    \label{remark:et-not-precoherent-topology}
\end{remark}

Let from now on $\mathcal{C}$ be precoherent equipped with the coherent topology.

\begin{proposition}
    Let $F \colon \pro{\mathcal{C}}^{\mathrm{op}} \to \mathrm{Set}$ be a sheaf. Then
    $F|_{\mathcal{C}^{\mathrm{op}}}$ is a sheaf.
    \label{prop:sheaf-pro-restrict}
\end{proposition}

By \ref{prop:sheaf-pro-restrict}, the inclusion functor $\mathcal{C} \to \pro{\mathcal{C}}$ induces a morphism on sites
$\nu\colon \pro{\mathcal{C}} \to \mathcal{C}$.
The direct image functor $\nu_{*}\colon \shv{\pro{\mathcal{C}}} \to \shv{\mathcal{C}}$ agrees with the
restriction $F \mapsto F|_{\mathcal{C}^{\mathrm{op}}}$.

\begin{proposition}
    Let $F \colon \pro{\mathcal{C}}^{\mathrm{op}} \to \mathrm{Set}$ be a presheaf. Suppose
    $F|_{\mathcal{C}^{\mathrm{op}}}$ is a sheaf and $F$ preserves filtered colimits. Then
    $F$ is a sheaf.
    \label{prop:sheaf-pro}
\end{proposition}

Combining \ref{prop:pro-univ-prop} and \ref{prop:sheaf-pro} yields:

\begin{corollary}
    Let $F$ be a sheaf on $\mathcal{C}$. Then the unit $F \to \nu_{*} \nu^{-1} F$ is an isomorphism.
    \label{cor:pro-direct-image-unit-iso}
\end{corollary}

\begin{proof}
    \uses{prop:pro-univ-prop, prop:sheaf-pro}
    Denote by $\mathrm{res}$ the restriction functor
    $\mathrm{PShv}(\pro{\mathcal{C}}) \to \mathrm{PShv}(\mathcal{C})$ and by
    $\mathrm{ext}$ the left-adjoint of \ref{prop:pro-univ-prop}. By \ref{prop:sheaf-pro},
    $\mathrm{ext}$ restricts to a functor $\mathrm{Shv}(\pro{\mathcal{C}}) \to \mathrm{Shv}(\mathcal{C})$
    that is the left-adjoint of $\nu_*$. In particular it agrees with $\nu^{-1}$ and
    the result follows.
\end{proof}

\section{Generated topologies}

The previous section established a relationship between the coherent topologies on $\mathcal{C}$ and
$\pro{\mathcal{C}}$. In the situations we are interested in, the topologies don't necessarily agree
with the coherent topologies though (see \Cref{remark:et-not-precoherent-topology}).

To remedy the situation, we make the following definitions:

\begin{definition}
    Let $\mathcal{U}$ be a one-hypercover in a site $\mathcal{C}$. We say
    $\mathcal{U}$ is \emph{exact} if taking filtered colimits
    preserves the multiequalizer diagram of $\mathcal{U}$.
\end{definition}

\begin{example}
    Any finite one-hypercover is exact, because filtered colimits commute
    with finite limits.
\end{example}

\begin{definition}
    Let $F\colon \mathcal{C} \to \mathcal{D}$ be a functor between sites. We say
    a one-hypercover $\mathcal{U}$ of an object $X$ in $\mathcal{D}$ is
    \emph{relatively pro-representable} if it is exact and $\mathcal{U}$ can be written
    as the componentwise cofiltered limit of one-hypercovers in $\mathcal{C}$.
    \label{def:one-cover-relatively-pro-prepresentable}
    \lean{CategoryTheory.GrothendieckTopology.oneHypercoverRelativelyRepresentable}
    \leanok
\end{definition}

\noindent Concretely, a one-hypercover $\mathcal{U} = (U_{\alpha}, U_{\alpha \beta \gamma})$ is
relatively pro-representable if there exists
\begin{enumerate}
    \item a cofiltered diagram $\mathcal{I}$,
    \item functors $V_{\alpha}\colon \mathcal{I} \to \mathcal{C}$ and
        $V_{\alpha \beta \gamma}\colon \mathcal{I} \to \mathcal{C}$,
    \item natural transformations $p_1 \colon V_{\alpha \beta \gamma} \to V_{\alpha}$ and
        $p_2\colon V_{\alpha \beta \gamma} \to V_{\beta}$,
\end{enumerate}
such that
\begin{enumerate}
    \item $U_{\alpha} = \lim_i V_{\alpha}(i)$ and $U_{\alpha \beta \gamma} = \lim_i V_{\alpha \beta \gamma}(i)$, and
    \item for every $i \in \mathcal{I}$, the induced pre-one-hypercover $(V_{\alpha}(i), V_{\alpha \beta \gamma}(i))$
        is a one-hypercover.
\end{enumerate}

\begin{example}
    Suppose $\mathcal{C}$ is coherent, $\mathcal{D} = \pro{\mathcal{C}}$ and
    $F \colon \mathcal{C} \to \pro{\mathcal{C}}$ the inclusion. If
    both $\mathcal{C}$ and $\pro{\mathcal{C}}$ are equipped with the coherent topologies,
    the topology on $\pro{\mathcal{C}}$ is generated by relatively pro-representable
    one-hypercovers.
\end{example}

The analogue of \ref{prop:sheaf-pro} is:

\begin{proposition}
    Suppose the topology on $\mathcal{D}$ is generated by relatively pro-representable
    one-hypercovers and let $P$ be a presheaf on $\mathcal{D}$. If
    $P \circ F^{\mathrm{op}}$ is a sheaf on $\mathcal{C}$ and
    $P$ preserves filtered colimits, then $P$ is a sheaf on $\mathcal{D}$.
    \uses{def:one-cover-relatively-pro-prepresentable}
    \label{prop:sheaf-relatively-representable-generated}
    \lean{CategoryTheory.Presheaf.IsSheaf.of_preservesFilteredColimitsOfSize}
    \leanok
\end{proposition}

\begin{proof}
    \leanok
    By the assumption, it suffices to check the sheaf condition for every
    relatively pro-representable one-hypercover $\mathcal{U} = \lim F(\mathcal{V}_i)$.
    Because $P$ preserves filtered colimits, one computes that
    the sheaf condition for $\mathcal{U}$ is the filtered colimit
    of the sheaf conditions for $\mathcal{V}_i$. But
    $P \circ F^{\mathrm{op}}$ is a sheaf and filtered colimits preserve
    the equalizers because $\mathcal{U}$ is exact.
\end{proof}
